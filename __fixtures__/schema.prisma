datasource db {
  provider = "sqlite"
  url      = "file:./db.sqlite3"
}

model Report {
  id          Int      @id @default(autoincrement())
  notes       String   @default("No notes")
  isPublished Boolean  @default(true)
  createdAt   DateTime @default(now())
  authorId    Int
  author      User     @relation(fields: [authorId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@unique([notes, isPublished], name: "published_notes_unique")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  firstName String?
  lastName  String?  @default("Doe") @map("last_name")
  createdAt DateTime @default(now())
  reports   Report[]

  @@unique([email, id], name: "full_name_unique")
}

model Test {
  id   Int    @id
  name String

  @@map(name: "tests")
  @@ignore
}
